<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<title>问问首页</title>
	<link rel="stylesheet" href="css/iconfont.css">
	<link rel="stylesheet" href="css/TicWatch1.css">
</head>

<body>
	<!-- header -->
	<div class="header">
		<div class="head">
			<a href=""><img src="img/logo.png" alt=""></a>
			<a href="ticwatch.html">问问手表</a>
			<a href="tickasa.html">问问音箱</a>
			<a href="free.html">问问耳机</a>
			<a href="watch.html">配件周边</a>
		</div>
		<div class="headright">
			<a href="ceshi.html">注册</a>
			<a href="denglu.html">登录</a>
			<a href="shopping.html">
				<span class="iconfont icon-gwc"></span>
			</a>
			<span id="spanNum" class="span">0</span>
		</div>
	</div>

	<!-- section -->
	<div class="section">
		<a href="index.html">首页</a>
		<span> / </span>
		<b>商品分类</b>
		<span> / </span>
		<a href="">
			<p> TicWatch Kids</p>
		</a>
	</div>

	<!-- sex -->
	<div class="sexMine">
		<div id="boxMo">
			<div class="bigBox" id="bigBox" style="display: block;">
				<div class="sexLeft">
					<i id="sex_left" class="showimg"><img id="images" src="img/tic1.png" alt=""></i>
					<i id="sex_left"><img src="img/tic2.png" alt=""></i>
					<i id="sex_left"><img src="img/tic3.png" alt=""></i>
					<i id="sex_left"><img src="img/tic4.png" alt=""></i>
					<i id="sex_left"><img src="img/tic5.png" alt=""></i>
				</div>
				<div id="sexMid">
					<b class="sexMidAd">
						<img src="img/tic1.png" alt="">
					</b>
					<b>
						<img src="img/tic2.png" alt="">
					</b>
					<b>
						<img src="img/tic3.png" alt="">
					</b>
					<b>
						<img src="img/tic4.png" alt="">
					</b>
					<b>
						<img src="img/tic5.png" alt="">
					</b>

					<div class="mirrorBox" id="mirrorBox" style="display: none;"></div>
				</div>
			</div>
			<div class="bigBox_1" id="bigBox_1" style="display: none;">
				<div class="sexLeft_1">
					<i id="sex_left" class="showimg_1"><img src="img/tic6.png" alt=""></i>
					<i id="sex_left"><img src="img/tic7.png" alt=""></i>
					<i id="sex_left"><img src="img/tic8.png" alt=""></i>
					<i id="sex_left"><img src="img/tic9.png" alt=""></i>
					<i id="sex_left"><img src="img/tic10.png" alt=""></i>
				</div>
				<div id="sexMid_bt">
					<b class="sexMidAd_bt">
						<img src="img/tic6.png" alt="">
					</b>
					<b>
						<img src="img/tic7.png" alt="">
					</b>
					<b>
						<img src="img/tic8.png" alt="">
					</b>
					<b>
						<img src="img/tic9.png" alt="">
					</b>
					<b>
						<img src="img/tic10.png" alt="">
					</b>

					<div class="mirrorBox" id="mirrorBox_bt" style="display: none;"></div>
				</div>
			</div>
		</div>

		<div class="sexNone" id="sexNone" style="display: none;">
			<img src="img/tic1.png" alt="">
		</div>
		<div class="sexRight">
			<div class="sexTop">
				<b id="vipName">TicWatch Kids</b>
				<strong>4G全网通 | 楼层级定位 | AI儿童手表</strong>
				<a href="">满99元包邮</a>
				<p>价格 <span id="goodsId">¥799</span></p>
			</div>
			<div id="sexBon">
				<p>颜色</p>
				<b class="col_a cur">奇幻蓝</b>
				<b class="col_b">童话粉</b>
				<p>选择数据</p>
				<span id="left">-</span>
				<input id="numCha" type="text" value="1">
				<span id="right">+</span><br>
				<button id="addShop"">加入购物车</button>
			</div>
			<div id="flex" style="display: none;">
				添加成功
			</div>
		</div>
	</div>
	<div class="vid">
		<video controls loop muted poster="">
			<source src="ticwatch-kids-cn.mp4" type="video/mp4">

		</video>
	</div>
	<div class="image">
		<img src="img/kid1.png" alt="">
		<img src="img/kid2.jpg" alt="">
		<img src="img/kid3.jpg" alt="">
		<img src="img/kid4.jpg" alt="">
		<img src="img/kid5.jpg" alt="">
		<img src="img/kid6.jpg" alt="">
		<img src="img/kid7.jpg" alt="">
		<img src="img/kid8.jpg" alt="">
		<img src="img/kid9.jpg" alt="">
		<img src="img/kid10.png" alt="">
		<img src="img/kid11.jpg" alt="">
		<img src="img/kid12.jpg" alt="">
	</div>
	<div class="footerbot">
		<div class="mid">
			<div class="footerleft">
				<div class="box">
					<b>产品</b>
					<a href="">问问手表</a>
					<a href="">问问音箱</a>
					<a href="">问问耳机</a>
					<a href="">配件周边</a>
				</div>
				<div class="box">
					<b>帮助</b>
					<a href="">配对应用</a>
					<a href="">引导教程</a>
					<a href="">视频指导</a>
					<a href="">售后政策</a>
				</div>
				<div class="box">
					<b>媒体</b>
					<a href="">公司新闻</a>
					<a href="">产品消息</a>
					<a href="">媒体报道</a>
					<a href="">视频</a>
				</div>
				<div class="box">
					<b>用户</b>
					<a href="">问问论坛</a>
					<a href="">推荐奖励</a>
					<a href="">售后服务</a>
					<a href="">开放品台</a>
				</div>
				<div class="box">
					<b>关于</b>
					<a href="">关于我们</a>
					<a href="">联系我们</a>
				</div>
			</div>
			<div class="footerright" id="footerright">
				中文（简体）
				<div class="san"></div>

			</div>
			<div class="fudong" id="fudong">
				<a href="">中文（简体）</a>
				<a href="">中文（繁體）</a>
				<a href="">English</a>
			</div>
		</div>
		<div class="foot">
			<p>Copyright © 2019Mobvoi Inc. All Rights Reserved. 北京羽扇智信息科技有限公司 <span>|</span> 京ICP备14058077号-1
				<span>|</span>
				京公网安备11010802023146</p>
			<a href="">服务条款</a><span>|</span>
			<a href="">隐私条款</a><span>|</span>
			<a href="">儿童隐私政策</a>
		</div>
	</div>
</body>

</html>

<!-- <script src="http://libs.baidu.com/jquery/1.9.1/jquery.min.js"></script> -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
	integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
<script type="text/javascript" src="js/jquery-addShopping.js"></script>
<!-- <script src="js/move1908.js" ></script> -->
<!-- <script src="js/banner02.js" ></script> -->
<script type="text/javascript">

	// 选项卡
	$(".col_a").bind("click", function (e) {
		$("#bigBox").show();
		$("#bigBox_1").hide();
		$(".col_a").addClass("cur");
		$(".col_b").removeClass("cur");
		// var _index = $(".sexLeft i").index();
		// var imgSrc = $(".sexLeft i").children().attr("src");
		// $("#sexNone img").attr("src", imgSrc)

		var showimg = $(".showimg").children().attr("src");
		$("#sexNone img").attr("src", showimg)

	});
	$(".col_b").bind("click", function (e) {
		$("#bigBox").hide();
		$("#bigBox_1").show();
		$(".col_b").addClass("cur");
		$(".col_a").removeClass("cur");
		// var imgSrc = $(".sexLeft_1 i").children().attr("src");
		// $("#sexNone img").attr("src", imgSrc)

		var showimg_1 = $(".showimg_1").children().attr("src");
		$("#sexNone img").attr("src", showimg_1)
	});

	//图片选项卡  点击放大
	$(".sexLeft i").click(function () {
		var _index = $(this).index();
		$("#sexMid>b").eq(_index).show().siblings().hide();
		$(this).addClass("showimg").siblings().removeClass("showimg");
		var imgSrc = $(this).children().attr("src");
		$("#sexNone img").attr("src", imgSrc)
	});

	$(".sexLeft_1 i").click(function () {
		var _index = $(this).index();
		$("#sexMid_bt>b").eq(_index).show().siblings().hide();
		$(this).addClass("showimg_1").siblings().removeClass("showimg_1");
		var imgSrc = $(this).children().attr("src");
		$("#sexNone img").attr("src", imgSrc)
	});


	//放大镜效果  奇幻蓝
	$("#sexMid").mouseover(function () {
		$("#sexNone").show()
		$("#mirrorBox").show()
	})
	$("#sexMid").mouseout(function () {
		$("#sexNone").hide()
		$("#mirrorBox").hide()
	})
	$("#sexMid").mousemove(function (e) {
		var e = e || event;
		var x = e.clientX - $("#sexMid").offset().left - $("#mirrorBox").width() / 2;
		var y = e.clientY - $("#sexMid").offset().top - $("#mirrorBox").height() / 2;
		var maxx = $("#sexMid").width() - $("#mirrorBox").width();
		var maxy = $("#sexMid").height() - $("#mirrorBox").height();     
		if (x < 0) {
			x = 0
		}
		if (y < 0) {
			y = 0
		}
		if (x > maxx) {
			x = maxx;
		}
		if (y > maxy) {
			y = maxy
		}
		$("#mirrorBox").css({ top: y, left: x })
		$("#sexNone img").css({ top: -y * 2, left: -x * 2 })
	});

	//放大镜效果  童话粉
	$("#sexMid_bt").mouseover(function () {//鼠标移入事件，让放大镜和放大区显示！
		$("#sexNone").show()
		$("#mirrorBox_bt").show()
	})
	$("#sexMid_bt").mouseout(function () {//鼠标移出后，放大镜和放大区隐藏
		$("#sexNone").hide()
		$("#mirrorBox_bt").hide()
	})

	$("#sexMid_bt").mousemove(function (e) {            //首先要给左边大盒子加鼠标移动事件，这样才能一直触发事件，更新盒子位置
		var e = e || event;                    //声明event，用于获取鼠标位置
		var x = e.clientX - $("#sexMid_bt").offset().left - $("#mirrorBox_bt").width() / 2;    //这里x=鼠标位置减去左边大盒子距离网页边框的距离，这一步获得了鼠标相对于盒子内部的位置，之后再减去小盒子的宽/2，就获得了盒子正中间的位置。之后把这个值赋给x
		var y = e.clientY - $("#sexMid_bt").offset().top - $("#mirrorBox_bt").height() / 2;    //这个是鼠标的纵轴，原理同上
		var maxx = $("#sexMid_bt").width() - $("#mirrorBox_bt").width();       //这里声明了一个最大宽度，用于限制小盒子的右边移动范围，利用大盒子的总宽度减去小盒子的总宽度，剩下的就是小盒子的移动范围，这个好理解。
		var maxy = $("#sexMid_bt").height() - $("#mirrorBox_bt").height();     //小盒子纵轴移动范围 原理同上
		//这里开始四个if分别用来限制盒子的左上下右的最大移动范围，不能让小盒子超出大盒子
		if (x < 0) {
			x = 0
		}
		if (y < 0) {
			y = 0
		}
		if (x > maxx) {
			x = maxx;
		}
		if (y > maxy) {
			y = maxy
		}
		//最后将值通过css方法写入进去
		//这里要注意，不能用attr({top:y,left:x}),因为attr写入的属性是写到元素行内的，尽管css里提前写好了position样式，但行内的top和left还是无法和css里的定位属性进行关联。
		$("#mirrorBox_bt").css({ top: y, left: x })
		$("#sexNone img").css({ top: -y * 2, left: -x * 2 })    //这里是右边图片的移动属性，xy轴分别向反方向移动，做出跟随镜头的效果，乘二是因为右边大图比左边小图大一倍。

	});


var spanLeft = document.getElementById("left");
var spanRight = document.getElementById("right");
var number = document.getElementById("numCha");
window.onload = function () {
    //减法
    spanLeft.onclick = function(){
        //一、输入
        let num = number.value;
        //二、逻辑
        //1、修改数量的
        num--;
        if(num<=0){
            num=0;
        }
        //三、输出
        number.value = num;
    }
    spanRight.onclick = function(){
        //一、输入
        let num = number.value;
        //二、逻辑
        //1、修改数量的
        num++;
        //三、输出
        number.value = num;
    }
    
}

$(function(){
   $('#sexBon button').shoping({
		endElement:".iconfont",
		iconCSS:"",
		iconImg:"img/cart.png",
		endFunction:function(element){
			$("#spanNum").html(parseInt($("#numCha").val()));
			console.log(element);
			return false;
		}
	})
});


let addShop = document.getElementById("addShop");
let vipName = document.getElementById("vipName");
let goodsId = document.getElementById("goodsId");
let numCha = document.getElementById("numCha");
let image = document.getElementById("images");
let flex = document.getElementById("flex");
addShop.onclick = function(){
    //1、
    let xhr = new XMLHttpRequest();

		xhr.open("post","php/addShoppingCart.php",true);

		xhr.onreadystatechange = function(){
			if(xhr.readyState==4 && xhr.status==200){
	            if(xhr.responseText=="-1"){
	            	flex.style.display="block";
	                flex.innerHTML ="该商品已存在";
	            }else if(xhr.responseText=="0"){
	            	flex.style.display="block";
	                flex.innerHTML ="添加商品失败";
	            }else if(xhr.responseText=="1"){
	            	flex.style.display="block";
	                flex.innerHTML ="添加成功，请<a href='denglu.html'>去购物车结算</a>";
	            }
	        }
		}
		//post方式：设置请求头
		xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		//post方式：把传给服务器端数据（键值对）放在send函数的参数里
		let sendstr = `vipName=${vipName.innerHTML}&goodsId=${goodsId.innerHTML}&goodsCount=${numCha.value}&image=${image.src}`;
		xhr.send(sendstr);

}
</script>