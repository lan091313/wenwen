<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>问问ID登录</title>
	<link rel="stylesheet" href="css/denglu.css">
</head>
<body>
	<div class="box">

		<img src="img/logo2.png" alt=""><br>
		<span></span>
		<b>用手机号登录</b>
		<span></span>

		<input class="sub" id="subn" type="text" placeholder="手机号" style="border-bottom:1px solid #bbc8cc;">
		<span id="spBt" style="display: none;">请输入正确手机号</span>
		<input id="subMit" type="text" placeholder="密码">
		<div class="btna">
			<button id="btnlong" type="text" class="btn btn-default">登录</button>
			<div id="messageBox"></div>
		</div>
		<a href="ceshi.html" class="a1">忘记密码?</a>
		<a href="ceshi.html" class="a2">动态密码登录</a><br>
		<a href="ceshi.html" class="a3">注册</a>
		<p class="divP">用社交账号登录·免注册</p>
		<div class="smoll">
			<img src="img/wechat.png" alt="">
		</div>
		<div class="smoll">
			<img src="img/social-qq.png" alt="">
		</div>
	</div>
	<p class="pl">Copyright © 2019 Mobvoi Inc. All Rights Reserved. 北京羽扇智信息科技有限责任公司 京ICP备14058077号-1</p> 
</body>
</html>

<script>

	$("#subn").onblur = function(){
		var r =  /^1[3-9]\d{9}$/ 

  	 	if(r.test(this.value)){
  	 		$("#spBt").style.display="1px solid #bbc8cc";
  	 	}else{
  	 		$("#spBt").style.display="block";
  	 		$("#subn").style.borderBottom= "1px solid #d33253";
  	 	}
  	}
  	$("#subn").onfocus= function(){
 		$("#spBt").style.display="none";
 		$("#subn").style.borderBottom= "1px solid #bbc8cc";
  	}
  	

  	$("#btnlong").onclick = function(){
    //1、
	    let xhr = new XMLHttpRequest();

	    xhr.open("post","php/denglu.php",true);

	    xhr.onreadystatechange = function(){
	        if(xhr.readyState==4 && xhr.status==200){
	            if(xhr.responseText=="1"){
	                location.href="index.html";
	            }else{
	                $("#messageBox").innerHTML = "亲，用户名或者密码不对";
	            }
	        }
	    }
	    //post方式：设置请求头
	    xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
	    //post方式：把传给服务器端数据（键值对）放在send函数的参数里。
	    let sendstr = `username=${$("#spBt").value}&userpass=${$("#subMit").value}`;
	    xhr.send(sendstr);
	}


	function $(str){
	    if(str[0]=="#"){
	        return document.getElementById(str.substring(1));
	    }else if(str[0]=="."){
	        return document.getElementsByClassName(str.substring(1));
	    }else{
	        return document.getElementsByTagName(str);
	    }
	}

</script> 

